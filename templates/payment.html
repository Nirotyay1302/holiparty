{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow mb-4">
                <div class="card-header bg-primary text-white text-center">
                    <h3>ðŸ’³ Pay via UPI â€“ â‚¹{{ amount }}</h3>
                    <p class="mb-0 small">Ticket & email will be sent only after admin confirms your payment</p>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5>Order Summary</h5>
                            <div class="card bg-light">
                                <div class="card-body">
                                    <p><strong>Ticket ID:</strong> {{ ticket_id }}</p>
                                    <p><strong>Name:</strong> {{ name }}</p>
                                    <p><strong>Number of Passes:</strong> {{ passes }}</p>
                                    <p><strong>Total Amount:</strong> â‚¹{{ amount }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- UPI / QR Code Payment -->
                            <div class="card border-success h-100">
                                <div class="card-body text-center">
                                    <h6 class="text-success mb-2">Scan QR to pay via UPI</h6>
                                    <img src="{{ url_for('static', filename='images/upi-qr.png') }}" alt="UPI QR Code" class="img-fluid" style="max-width: 200px;">
                                    <p class="mb-0 mt-2 fw-bold">Nirotyay Mukherjee</p>
                                    <p class="text-muted small mb-2">7278737263@jio</p>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" value="7278737263@jio" readonly>
                                        <button class="btn btn-outline-primary" type="button" onclick="navigator.clipboard.writeText('7278737263@jio'); this.textContent='Copied!'; setTimeout(()=>this.textContent='Copy', 2000)">Copy</button>
                                    </div>
                                    <p class="small text-muted mt-2 mb-2">Pay exactly â‚¹{{ amount }}. Add Ticket ID <strong>{{ ticket_id }}</strong> in payment note.</p>
                                    <form action="/confirm_payment" method="POST">
                                        <input type="hidden" name="ticket_id" value="{{ ticket_id }}">
                                        <button type="submit" class="btn btn-warning w-100" id="upiConfirmBtn">
                                            âœ“ I've paid via UPI / QR
                                        </button>
                                    </form>
                                    <p class="small text-muted mt-2 mb-0">Admin will verify & email your ticket.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Demo Ticket Preview (as per â‚¹200 criteria) -->
                    <div class="card border-2 border-primary mt-4">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">ðŸ“‹ Demo Ticket Preview (Sample â€“ â‚¹200 Entry)</h6>
                        </div>
                        <div class="card-body">
                            <div class="demo-ticket p-4 rounded" style="background: linear-gradient(135deg, #fff8f0 0%, #fff 100%); border: 2px dashed #ff2f92;">
                                <div class="text-center mb-3">
                                    <strong class="text-primary">SPECTRA HOLIPARTY 2026</strong><br>
                                    <small>Entry Ticket</small>
                                </div>
                                <div class="row small">
                                    <div class="col-6"><strong>Name:</strong> Sample User</div>
                                    <div class="col-6"><strong>Ticket ID:</strong> XXXXXXXX</div>
                                    <div class="col-12 mt-2"><strong class="bg-warning px-2 py-1 rounded">Amount Paid: â‚¹200</strong></div>
                                    <div class="col-6 mt-2"><strong>Passes:</strong> 1 | Entry Only</div>
                                    <div class="col-6 mt-2"><strong>Venue:</strong> Dighi Garden Mankundu</div>
                                    <div class="col-12 mt-2"><strong>Date:</strong> March 4, 2026 | 10:00 AM - 5:00 PM</div>
                                    <div class="col-12 mt-2 text-center">
                                        <div class="d-inline-block bg-secondary text-white px-3 py-2 rounded">[QR Code]</div>
                                    </div>
                                </div>
                                <p class="small text-muted text-center mt-2 mb-0">Your actual ticket will be emailed after admin confirms payment.</p>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow mt-4">
                        <div class="card-body">
                            <h6>Payment Instructions</h6>
                            <ol class="mb-0">
                                <li>Scan the QR code or use UPI ID <strong>7278737263@jio</strong></li>
                                <li>Send exactly <strong>â‚¹{{ amount }}</strong> and add <strong>Ticket ID: {{ ticket_id }}</strong> in the payment note</li>
                                <li>Click "I've paid via UPI / QR" after payment</li>
                                <li>Admin will verify and email your ticket. No ticket until admin confirms as Paid.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
